%%% 多値論理研究会用スタイルファイル
%%% Time-stamp: <2021-01-23 10:02:15 hirayama>
%%%
%%% パッケージの作り方の参考情報:
%%% https://en.wikibooks.org/wiki/LaTeX/Creating_Packages
%%%
%%% 使い方: LaTeX本文中で
%%% \usepackage[mvlforum]{mymvlmacros} (多値論理フォーラムの場合)または
%%% \usepackage[mvlnishuken]{mymvlmacros} (多値論理二種研の場合)
%%%
%%% 多値論理フォーラムでは、LaTeX本文中で、下記のパラメタを設定すること
%%% -------
%%% \renewcommand{\mvlvolume}{27} % 多値論理フォーラムの巻号
%%% \renewcommand{\mvlpresennumber}{11} % 多値論理フォーラムの発表番号
%%% \renewcommand{\mvlyear}{2015} % 年
%%% \renewcommand{\mvlmonth}{9} % 月
%%% -------
%%%

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{mymvlmacros}

%\RequirePackage{}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% ヘッダ部

%% 多値論理フォーラム用のヘッダ
\newcommand{\mvlvolume}{0}
\newcommand{\mvlpresennumber}{0}
\newcommand{\mvlyear}{0}
\newcommand{\mvlmonth}{0}
\newcommand{\mvlmonthname}{January}
\renewcommand{\mvlmonthname}{\ifcase\mvlmonth Zero\or January\or February\or March\or April\or May\or June\or July\or August\or September\or October\or November\or December\fi}
\newcommand{\@mvlforumheader}{}
\newlength{\mvltextwidth}
\newlength{\mvltextheight}

%% 'mvlforum' option
\DeclareOption{mvlforum}{
\mvltextwidth=170truemm
\mvltextheight=240truemm
% 多値論理フォーラムの余白メモ: 上下に25mm、左右に17mm
% 多値論理フォーラム用のヘッダを表示する。
 \renewcommand{\@mvlforumheader}{
  \begin{minipage}[b]{\textwidth}
  \fontsize{12pt}{15pt}\selectfont
  \textbf{多値論理研究ノート}\hfill
  \textbf{第{\mvlvolume}巻\hspace{1em}{\mvlpresennumber}号}\hfill
  \textbf{{\mvlyear}年 {\mvlmonth}月}\\
  Note on Multiple-Valued Logic in Japan\\
  \hfill Vol.{\mvlvolume},  No.{\mvlpresennumber}, {\mvlmonthname} {\mvlyear}\\
  \rule[0.5em]{\textwidth}{0.5pt}
  \end{minipage}
  }
\renewcommand{\thepage}{{\mvlpresennumber}--\arabic{page}}
% 多値論理フォーラムでは、ページ番号をXX-1のようにする。
}

%% 'mvlnishuken' option
\DeclareOption{mvlnishuken}{
\mvltextwidth=174truemm
\mvltextheight=250truemm
% 多値論理二種研の余白メモ: 上下に20mm、左右に15mm
\renewcommand{\thepage}{}
% 二種研ではページ番号なし
}

%% 'mvlnishuken'is the default
\ExecuteOptions{mvlnishuken}
\ProcessOptions\relax %terminates the option processing.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 用紙の余白の設定

\@ifundefined{setpagelayout}
{
%% 原始的な方法で、文面を中央に合わせる
\newdimen\sheetwidth \newdimen\sheetheight
\def\Afoursheet{\sheetwidth=210truemm \sheetheight=297truemm}
\def\Afivesheet{\sheetwidth=148truemm \sheetheight=210truemm}
\def\Bfoursheet{\sheetwidth=257truemm \sheetheight=363truemm}
\def\Bfivesheet{\sheetwidth=182truemm \sheetheight=257truemm}
\def\Lettersheet{\sheetwidth=8.5truein \sheetheight=11truein}

\def\sheetcenter{ \oddsidemargin=\sheetwidth
 \advance\oddsidemargin-\textwidth \oddsidemargin=0.5\oddsidemargin
 \advance\oddsidemargin-1truein \evensidemargin=\oddsidemargin
 \topmargin=\sheetheight \advance\topmargin-\textheight
 \topmargin=0.5\topmargin \advance\topmargin-\headheight
 \advance\topmargin-\headsep \advance\topmargin-1truein }

\textwidth=\mvltextwidth
\textheight=\mvltextheight
\Afoursheet\sheetcenter
}
{
%% BXjsclsのやり方で、文面を中央に合わせる
\setpagelayout{width=\mvltextwidth, height=\mvltextheight, centering}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% タイトルページ

%% 日本語名と英語名を上下ペアで表示する。
\newcommand{\mydoublename}[2]{\begin{tabular}{c}{#1}\\{#2}\end{tabular}}

%% 2段組みにおいて、アブストラクトは1段ぶちぬきにする。
\newcommand{\@myabstract}{}
\renewcommand{\abstract}[2][\abstractname]{
 \newcommand{\@myabstractcontents}{#2}
 \newcommand{\@myabstractname}{#1}
 \renewcommand{\@myabstract}{
    \centering
    \begin{minipage}{0.9\textwidth}
    \textbf{{\@myabstractname}:} \@myabstractcontents
    \end{minipage}
    \vskip 1.5em
 }
}
%% '\abstract'の使い方例
%% 例1: 通常は、出だしが「概要:」になる。
% \abstract{本論文では、新しい下界を与える。}
% →概要: 本論文では、新しい下界を与える。
%% 例2: 出だしを変えたいときは、オプション引数で指定する。
% \abstract[要旨]{本論文では、新しい下界を与える。}
% →要旨: 本論文では、新しい下界を与える。
%% 例3: 英語
% \abstract[Abstract]{This paper presents a new lower bound.}
% →Abstract: This paper presents a new lower bound.

%% タイトル
%%
%% \@maketitleを変更した。
%% 変更元: jarticle.cls
%% 主な変更点:
%% ・タイトルの上に余白を追加していたのを、しないようにした。
%% ・多値論理フォーラム用のヘッダを追加した。
%% ・ぶちぬきアブストラクトを追加した。
%% ・\dateは無視するようにした。
\def\@maketitle{%
  \centering
  \let\footnote\thanks
    \@mvlforumheader {\LARGE \@title \par}%
    \vskip 1.5em%
    {\large
      \lineskip .5em%
      \begin{tabular}[t]{c}%
        \@author
      \end{tabular}\par}%
%    \vskip 1em%
%    {\large \@date}%
  \par\vskip 1.5em
  \@myabstract
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 参考文献

%% 参考文献リストの行間スペースを削減する
\let\oldbibliography\thebibliography
\renewcommand{\thebibliography}[1]{%
  \oldbibliography{#1}%
  \small
  \setlength{\itemsep}{0pt}%
  \setlength{\parskip}{0pt}%
}

\endinput % this must be the last command in a package.
